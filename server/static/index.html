<!doctype html>
<html lang="en">
  <head>
    <title>This is nice</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>
  <body>

    <div x-data="wallpapers()" x-init="fetchWallpapers()">
      <div style="display: flex; gap: 10px;">
        <template x-for="wallpaper in wallpapers" :key="wallpaper.id">
          <div>
            <img :src="`/wallpapers/thumbnail/${wallpaper.code}`" />
            <button @click="deleteImage(wallpaper.code, wallpaper.extension)">delete</button>
            <button x-on:click="setWallpaper(`${wallpaper.code}`)">set on clients</button>
          </div>
        </template>
      </div>
      <div>
        <h3>Upload new wallpaper</h3>
        <form @submit.prevent="uploadImage">
          <input type="file" id="file" name="file" accept="image/*" @change="handleFileUpload">
          <template x-if="selectedFile != null">
          <button type="submit" >Upload</button>
          </template>
        </form>
      </div>
    </div>

    <div x-data="clients()">
      <h3>Client List</h3>
      <template x-for="client in data">
        <p>
          <template x-if="client.connected_at != ''">
            <span>ONLINE</span>
          </template>
          <span x-text="client.addr"></span> 
          <span x-text="client.hostname"></span>
          <img :src="`/wallpapers/thumbnail/${client.wallpaper_code}`"  width='80px'/>
        </p>
      </template>
      <div>
      </div>
    </div>

    <script src="static/js/main.js"></script>
  </body>
</html>
