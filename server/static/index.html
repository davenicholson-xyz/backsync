<!doctype html>
<html lang="en" class="sl-theme-dark">

  <head>
    <title>This is nice</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.17.1/cdn/themes/dark.css" />
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.17.1/cdn/shoelace-autoloader.js"></script>
    <link rel="stylesheet" href="static/css/main.css" />
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>

  <body x-data="router()">
    <div class="container" x-data="dragAndDrop()">

      <div x-data="$store.clients" class="clients">
        <template x-for="client in data">
          <div class="client" 
            :class="{'highlight': client.id == hoveredClientId}"
            :data-client-id="client.id" 
            @dragenter="dragEnter(client.id)" 
            @dragleave="dragLeave"
            @dragover.prevent 
            @drop="dropWallpaper($event)">

            <!-- <div class="badge"> -->
            <!--   <template x-if="client.connected_at != ''"> -->
            <!--     <sl-tooltip :content="client.connected_at"> -->
            <!--       <sl-badge variant="success" pill pulse class="online">&nbsp;&nbsp;</sl-badge> -->
            <!--     </sl-tooltip> -->
            <!--   </template> -->
            <!--   <template x-if="client.connected_at == ''"> -->
            <!--     <div> -->
            <!--     <sl-tooltip content="Offline"> -->
            <!--       <sl-badge variant="danger" pill class="online">&nbsp;&nbsp;</sl-badge> -->
            <!--     </sl-tooltip> -->
            <!--     </div> -->
            <!--   </template> -->
            <!-- </div> -->

            <div>
              <template x-if="client.wallpaper_code">
                <img :src="`/wallpapers/thumbnail/${client.wallpaper_code}`" />
              </template>
              <template x-if="!client.wallpaper_code">
                <img src="/static/images/missing.png" />
              </template>
            </div>

            <div class="action">
              <sl-dropdown style="width:100%;">
                <sl-button size="small" style="width: 100%;" class="clientb" slot="trigger" caret>
                  <sl-icon slot="prefix" name="laptop" :class="{'online': client.connected_at != ''}"></sl-icon>
                  <span x-text="client.hostname"></span>
                </sl-button>
                <sl-menu>
                  <sl-menu-item disabled x-text="client.addr"></sl-menu-item>
                  <sl-menu-item>Rename</sl-menu-item>
                  <sl-divider></sl-divider>
                  <sl-menu-item type="checkbox" checked>Checkbox</sl-menu-item>
                  <sl-divider></sl-divider>
                  <sl-menu-item>
                    Delete
                    <sl-icon slot="prefix" name="trash3"></sl-icon>
                  </sl-menu-item>
                </sl-menu>
              </sl-dropdown>
            </div>
        </template>
      </div>

      <div>
        <nav>
          <ul><a href="/" @click.prevent="navigate('home', '/')">home</a></ul>
          <ul><a href="/papers" @click.prevent="navigate('papers', '/papers')">papers</a></ul>
        </nav>

        <br /><br />
        <main x-html="pageContent"></main>
      </div>

    </div>

    <div id="drag-thumbnail">
        <img id="drag-thumbnail-image">
    </div>

    <script src="static/js/main.js"></script>
  </body>

</html>
